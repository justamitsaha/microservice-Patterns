# =========================================
# Spring Boot service: gateway-service (GCP profile)
# =========================================
spring.application.name=gateway-service

# Spring Cloud Gateway
spring.cloud.gateway.server.webflux.discovery.locator.enabled=false
spring.cloud.gateway.server.webflux.discovery.locator.lower-case-service-id=true

# Optional Redis (not deployed by default); keep off unless provided via env
spring.data.redis.host=${SPRING_DATA_REDIS_HOST:}
spring.data.redis.port=${SPRING_DATA_REDIS_PORT:6379}

# Kafka metrics (if enabled)
management.kafka.bootstrap-servers=${MANAGEMENT_KAFKA_BOOTSTRAP:my-cluster-kafka-bootstrap.kafka.svc.cluster.local:9092}

# Actuator & Observability
management.endpoints.web.exposure.include=${MANAGEMENT_ENDPOINTS:health,info,metrics,prometheus,refresh,busrefresh}
management.tracing.sampling.probability=${TRACING_SAMPLING:1.0}
management.tracing.export.otlp.endpoint=${OTLP_ENDPOINT:http://tempo.observability.svc.cluster.local:4318/v1/traces}

# Global CORS (adjust your host as needed)
spring.cloud.gateway.server.webflux.globalcors.cors-configurations.[/**].allowed-origins=*
spring.cloud.gateway.server.webflux.globalcors.cors-configurations.[/**].allowed-methods=GET,POST,PUT,DELETE,OPTIONS
spring.cloud.gateway.server.webflux.globalcors.cors-configurations.[/**].allowed-headers=*
spring.cloud.gateway.server.webflux.globalcors.cors-configurations.[/**].allow-credentials=true
