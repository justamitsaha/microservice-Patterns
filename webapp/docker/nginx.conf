server {
  listen 80;
  server_name localhost;

  # Root of Angular build (actual files)
  root /usr/share/nginx/html;
  index index.html;

  # ---- Serve Angular under /web ----
  location /web/ {
    # Map /web/* â†’ actual files under /usr/share/nginx/html/*
    alias /usr/share/nginx/html/;
    try_files $uri $uri/ /index.html;
  }

  # ---- Serve only env.js (live config) ----
  location /web/assets/env.js {
    alias /usr/share/nginx/html/assets/env.js;
    add_header Cache-Control "no-store, no-cache, must-revalidate, proxy-revalidate, max-age=0";
  }

  # ---- Everything else: do NOT fallback to SPA ----
  # Prevents webapp from hijacking Eureka or APIs
  location / {
    return 404;
  }
}
