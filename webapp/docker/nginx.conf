server {
  listen 80;
  server_name localhost;

  root /usr/share/nginx/html;
  index index.html;

  # Handle request to /web (without trailing slash) by redirecting to /web/
  location = /web {
    return 301 /web/;
  }

  # Serve all assets under /web/assets/
  location /web/assets/ {
    alias /usr/share/nginx/html/assets/;
  }

  # Serve Angular under /web/
  location /web/ {
    alias /usr/share/nginx/html/;
    # This is the standard SPA fallback: try exact file, try directory, fall back to index.html
    try_files $uri $uri/ /index.html;
  }

  # Everything else — block
  location / {
    return 404;
  }
}

; server {
;   listen 80;
;   server_name localhost;
;
;   root /usr/share/nginx/html;
;   index index.html;
;
;   # Serve all assets under /web/assets/
;   location /web/assets/ {
;     alias /usr/share/nginx/html/assets/;
;   }
;
;   # Serve Angular under /web
;   location /web/ {
;     alias /usr/share/nginx/html/;
;     try_files $uri $uri/ /index.html;
;   }
;
;   # Everything else — block
;   location / {
;     return 404;
;   }
; }
